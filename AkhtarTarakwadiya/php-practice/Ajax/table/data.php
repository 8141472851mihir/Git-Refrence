<?php
$users = [
    ["id" => 1, "name" => "Akhtar", "age" => 21, "country" => "India", "state" => "Gujarat"],
    ["id" => 2, "name" => "Mohit", "age" => 22, "country" => "India", "state" => "Gujarat"],
    ["id" => 3, "name" => "Rahul", "age" => 24, "country" => "India", "state" => "Gujarat"],
    ["id" => 4, "name" => "Neha", "age" => 26, "country" => "India", "state" => "Gujarat"],
    ["id" => 5, "name" => "Pooja", "age" => 28, "country" => "India", "state" => "Gujarat"],

    ["id" => 1, "name" => "Vikram", "age" => 25, "country" => "India", "state" => "Delhi"],
    ["id" => 2, "name" => "Sonia", "age" => 29, "country" => "India", "state" => "Delhi"],
    ["id" => 3, "name" => "Priya", "age" => 22, "country" => "India", "state" => "Delhi"],
    ["id" => 4, "name" => "Ravi", "age" => 30, "country" => "India", "state" => "Delhi"],
    ["id" => 5, "name" => "Amit", "age" => 27, "country" => "India", "state" => "Delhi"],

    ["id" => 1, "name" => "Ankit", "age" => 26, "country" => "India", "state" => "Rajasthan"],
    ["id" => 2, "name" => "Manoj", "age" => 28, "country" => "India", "state" => "Rajasthan"],
    ["id" => 3, "name" => "Simran", "age" => 23, "country" => "India", "state" => "Rajasthan"],
    ["id" => 4, "name" => "Rajesh", "age" => 31, "country" => "India", "state" => "Rajasthan"],
    ["id" => 5, "name" => "Aarti", "age" => 25, "country" => "India", "state" => "Rajasthan"],

    ["id" => 1, "name" => "Amit", "age" => 29, "country" => "India", "state" => "Maharashtra"],
    ["id" => 2, "name" => "Maya", "age" => 24, "country" => "India", "state" => "Maharashtra"],
    ["id" => 3, "name" => "Raj", "age" => 30, "country" => "India", "state" => "Maharashtra"],
    ["id" => 4, "name" => "Komal", "age" => 27, "country" => "India", "state" => "Maharashtra"],
    ["id" => 5, "name" => "Neel", "age" => 32, "country" => "India", "state" => "Maharashtra"],

    ["id" => 1, "name" => "Yash", "age" => 23, "country" => "India", "state" => "Uttar Pradesh"],
    ["id" => 2, "name" => "Shalini", "age" => 26, "country" => "India", "state" => "Uttar Pradesh"],
    ["id" => 3, "name" => "Karan", "age" => 24, "country" => "India", "state" => "Uttar Pradesh"],
    ["id" => 4, "name" => "Deepa", "age" => 27, "country" => "India", "state" => "Uttar Pradesh"],
    ["id" => 5, "name" => "Sandeep", "age" => 28, "country" => "India", "state" => "Uttar Pradesh"],

    ["id" => 1, "name" => "John", "age" => 28, "country" => "US", "state" => "California"],
    ["id" => 2, "name" => "Mike", "age" => 30, "country" => "US", "state" => "California"],
    ["id" => 3, "name" => "Sara", "age" => 22, "country" => "US", "state" => "California"],
    ["id" => 4, "name" => "Liam", "age" => 27, "country" => "US", "state" => "California"],
    ["id" => 5, "name" => "Alice", "age" => 25, "country" => "US", "state" => "California"],

    ["id" => 1, "name" => "David", "age" => 32, "country" => "US", "state" => "New York"],
    ["id" => 2, "name" => "Emma", "age" => 26, "country" => "US", "state" => "New York"],
    ["id" => 3, "name" => "Sophia", "age" => 24, "country" => "US", "state" => "New York"],
    ["id" => 4, "name" => "Oliver", "age" => 30, "country" => "US", "state" => "New York"],
    ["id" => 5, "name" => "Lucas", "age" => 29, "country" => "US", "state" => "New York"],

    ["id" => 1, "name" => "Sarah", "age" => 28, "country" => "US", "state" => "Texas"],
    ["id" => 2, "name" => "Jack", "age" => 35, "country" => "US", "state" => "Texas"],
    ["id" => 3, "name" => "Megan", "age" => 27, "country" => "US", "state" => "Texas"],
    ["id" => 4, "name" => "Ben", "age" => 33, "country" => "US", "state" => "Texas"],
    ["id" => 5, "name" => "Olivia", "age" => 25, "country" => "US", "state" => "Texas"],

    ["id" => 1, "name" => "Emily", "age" => 24, "country" => "US", "state" => "Florida"],
    ["id" => 2, "name" => "John", "age" => 29, "country" => "US", "state" => "Florida"],
    ["id" => 3, "name" => "Grace", "age" => 32, "country" => "US", "state" => "Florida"],
    ["id" => 4, "name" => "Leo", "age" => 31, "country" => "US", "state" => "Florida"],
    ["id" => 5, "name" => "Max", "age" => 28, "country" => "US", "state" => "Florida"],

    ["id" => 1, "name" => "Emma", "age" => 26, "country" => "US", "state" => "Illinois"],
    ["id" => 2, "name" => "Noah", "age" => 25, "country" => "US", "state" => "Illinois"],
    ["id" => 3, "name" => "Mason", "age" => 29, "country" => "US", "state" => "Illinois"],
    ["id" => 4, "name" => "Lily", "age" => 28, "country" => "US", "state" => "Illinois"],
    ["id" => 5, "name" => "Sophie", "age" => 27, "country" => "US", "state" => "Illinois"],

    ["id" => 1, "name" => "Carlos", "age" => 23, "country" => "Mexico", "state" => "Jalisco"],
    ["id" => 2, "name" => "Luis", "age" => 29, "country" => "Mexico", "state" => "Jalisco"],
    ["id" => 3, "name" => "Sofia", "age" => 30, "country" => "Mexico", "state" => "Jalisco"],
    ["id" => 4, "name" => "Maria", "age" => 24, "country" => "Mexico", "state" => "Jalisco"],
    ["id" => 5, "name" => "Juan", "age" => 26, "country" => "Mexico", "state" => "Jalisco"],

    ["id" => 1, "name" => "Rosa", "age" => 25, "country" => "Mexico", "state" => "Nuevo León"],
    ["id" => 2, "name" => "Oscar", "age" => 28, "country" => "Mexico", "state" => "Nuevo León"],
    ["id" => 3, "name" => "Ana", "age" => 27, "country" => "Mexico", "state" => "Nuevo León"],
    ["id" => 4, "name" => "Carlos", "age" => 24, "country" => "Mexico", "state" => "Nuevo León"],
    ["id" => 5, "name" => "Fernanda", "age" => 29, "country" => "Mexico", "state" => "Nuevo León"],

];

if (isset($_POST["status"])) {
    $status = $_POST["status"];

    if ($status == "India") {
        echo "<option value='Gujarat'>Gujarat</option>";
        echo "<option value='Delhi'>Delhi</option>";
        echo "<option value='Rajasthan'>Rajasthan</option>";
        echo "<option value='Maharashtra'>Maharashtra</option>";
        echo "<option value='Uttar Pradesh'>Uttar Pradesh</option>";
    } elseif ($status == "US") {
        echo "<option value='California'>California</option>";
        echo "<option value='New York'>New York</option>";
        echo "<option value='Texas'>Texas</option>";
        echo "<option value='Florida'>Florida</option>";
        echo "<option value='Illinois'>Illinois</option>";
    } elseif ($status == "Mexico") {
        echo "<option value='Jalisco'>Jalisco</option>";
        echo "<option value='Nuevo León'>Nuevo León</option>";
        echo "<option value='Mexico City'>Mexico City</option>";
        echo "<option value='Veracruz'>Veracruz</option>";
        echo "<option value='Baja California'>Baja California</option>";
    } elseif ($status == "Canada") {
        echo "<option value='Ontario'>Ontario</option>";
        echo "<option value='Quebec'>Quebec</option>";
        echo "<option value='British Columbia'>British Columbia</option>";
        echo "<option value='Alberta'>Alberta</option>";
        echo "<option value='Manitoba'>Manitoba</option>";
    } elseif ($status == "UK") {
        echo "<option value='England'>England</option>";
        echo "<option value='Scotland'>Scotland</option>";
        echo "<option value='Wales'>Wales</option>";
        echo "<option value='Northern Ireland'>Northern Ireland</option>";
        echo "<option value='Greater London'>Greater London</option>";
    }
}



if (isset($_POST["states"])) {
    $selected_state = $_POST["states"];
    $filtered_users = array_filter($users, function ($user) use ($selected_state) {
        return $user["state"] === $selected_state;
    });

    if (!empty($filtered_users)) {
        foreach ($filtered_users as $user) {


            echo "<tr>
                    <td>{$user['id']}</td>
                    <td>{$user['name']}</td>
                    <td>{$user['age']}</td>
                    <td>{$user['country']}</td>
                    <td>{$user['state']}</td>
                    <td>
                        <div class='form-check form-switch'>
                        <input class='form-check-input' type='checkbox' id='mySwitch' name='active' value='yes' checked>
                        <label class='form-check-label' for='mySwitch'></label>
                        </div>
                    </td>
                </tr>";

        }
    } else {
        echo "<tr><td colspan='6' class='text-center'>No data available</td></tr>";
    }
}
?>

<script>
    $(document).ready(function() {
        $("#mySwitch").click(function() {
            $(this).toggleClass("active");
            const toast = document.getElementById('toastContainer');
            const toastHeader = document.getElementById('toastHeader');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');

            if ($(this).hasClass("active")) {
                toastHeader.classList.remove("bg-success", "text-white");
                toastHeader.classList.add("bg-danger", "text-white");
                toastTitle.textContent = "Warning!!!";
                toastMessage.textContent = "User Account Deactivated...";
            } else {
                toastHeader.classList.remove("bg-danger", "text-white");
                toastHeader.classList.add("bg-success", "text-white");
                toastTitle.textContent = "Success!!!";
                toastMessage.textContent = "User Account Activated...";

            }

            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
        });


    });

    // function showPopup() {
    //     const popup = document.getElementById('popup');
    //     popup.classList.remove('hidden');
    //     setTimeout(() => popup.classList.add('hidden'), 3000);
    // }
</script>